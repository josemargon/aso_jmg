## Script para gestionar cronetab

```
#!/bin/bash

while true; do
    clear

    echo "Gestion de crontab"
    echo "==================="
    echo "1) Ver tareas"
    echo "2) Añadir tarea"
    echo "3) Guardar backup"
    echo "4) Restaurar backup"
    echo "5) Salir"

    read -p "Elige una opcion: " opcion

    case $opcion in
        1)  echo "Tareas programadas"
            cronetab -l
            ;;

        2)  echo "Añadir tarea a crontab"
            read -p "Introduce harario y fecha: " tiempo
            read -p "Introduce comando: " comando
            (crontab -l; echo "$tiempo $comando") | crontab -
            echo "Tarea añadida"
            ;;
        
        3)  echo "Guardar backup"
            fecha=$(date +%Y%m%d_%H%M)
            archivo="crontab_bg_$fecha.cron"
            crontab -l > $archivo
            echo "Guardado como: $archivo
            ;;

        4)  echo "Restaurar backup"
            read -p "Introduce la ruta" ruta
            if [ ! -d "$ruta" ]; then
                echo "No existe"
                continue
            else
                echo "Archivos .cron disponibles: "
                ls "$ruta"/*.cron 2>/dev/null || echo "No se encontraron archivos .cron"

                read -p "Introduce nombre del fichero: " fichero

                if [ -f "$ruta/$fichero" ]; then
                    crontab "$ruta/$fichero"
                    echo "Restaurado"
                else
                    echo "No existe"
                fi
            fi
            ;;
        
        5)  echo "Saliendo"
            exit 0
            ;;

        *)  echo "Opcion no valida"
            ;;
    esac

    echo ""
    read -p "Presiona cualquier tecla para continuar" tecla

done
```

```
#!/bin/bash

if [ ! -d /backup ]; then
    mkdir /backup
fi

fecha=$(date +%Y%m%d)
mkdir -p /backup/$fecha
cd -r /var/log/* /backup/$fecha
```