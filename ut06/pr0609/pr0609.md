# PR0609

## Objetivo

El servidor de base de datos (SRV-SQL-PROD) se ha reiniciado inesperadamente esta madrugada. Tu jefe sospecha que el servidor se está quedando pequeño y que la CPU llegó al 100% provocando el colapso.

El sistema de monitorización ha volcado un array de enteros con el porcentaje de uso de CPU tomado cada 5 minutos durante la última hora crítica.

Tu objetivo será escribir un script que analice esos datos crudos y genere un informe automático para decidir si es necesario comprar más procesadores o si solo fue un error puntual.

## Datos de entrada

```
$muestrasCPU = @(15, 12, 18, 20, 45, 88, 95, 99, 100, 98, 55, 22, 15, 10, 12, 14, 95, 99, 100, 10)
```

## Requerimientos técnicos

Tu script debe recorrer el array $muestrasCPU y calcular manualmente lo siguiente:

- Carga promedio:
    - Suma todos los valores y divídelos entre la cantidad total de muestras.
- Pico máximo:
    - Debes averiguar cuál fue el valor más alto registrado.
- Contador de incidentes críticos:
    - Cuenta cuántas veces la CPU superó el 90%. Esto indicará la duración del incidente.
- Decisión final:
    - Si el promedio es superior a 70% O hubo más de 3 incidentes críticos, el script debe imprimir: [RECOMENDACIÓN] NECESARIO UPGRADE DE HARDWARE.
    - En caso contrario: [RECOMENDACIÓN] FALSA ALARMA. EL SERVIDOR AGUANTA.

## Script

```
$muestrasCPU = @(15, 12, 18, 20, 45, 88, 95, 99, 100, 98, 55, 22, 15, 10, 12, 14, 95, 99, 100, 10)
$suma=0
$maximo=0
$contadorCritico=0
$mensaje=''

foreach ($dato in $muestrasCPU) {
    $suma += $dato
    if($dato -gt $maximo){
        $maximo=$dato
    }
    if($dato -gt 90){
        $contadorCritico++ 
    }
}
$cargaPromedio = $suma / $muestrasCPU.Length
if($cargaPromedio -gt 70 -or $contadorCritico -gt 3){
    $mensaje="[RECOMENDACION] NECESARIO UPGRADE DE HARDWARE"
} else {
    $mensaje = "[RECOMENDACION] FALSA ALARMA. EL SERVIDOR AGUANTA"
}

Write-Host "=== INFORME DE RENDIMIENTO ==="
Write-Host "Muestras analizadas: "+$muestrasCPU.Length
Write-Host " "
Write-Host "RESULTADOS DEL ANALISIS:"
Write-Host "-Carga Promedio: "+$cargaPromedio+" %"
Write-Host "-Pico Maximo: "+$maximo+" %"
Write-Host "-Incidentes Criticos (>90%): "+$contadorCritico
Write-Host " "
Write-Host "DIAGNOSTICO:"
Write-Host $mensaje
```

## Resultado

```

```