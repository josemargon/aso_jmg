# PR0608

## Objetivo

Eres administrador de sistemas Windows. Microsoft acaba de publicar un boletín de seguridad crítico debido a una vulnerabilidad “Zero-Day”.

Tu jefe te ha pasado dos listas en formato texto:

- La lista oficial de los parches (KBs) que deberían estar instalados para estar protegidos.
- La lista real extraída de un servidor crítico (SRV-PRODUCCION) con los parches que tiene instalados actualmente.

Tu objetivo es crear un script que compare ambas listas y te diga exactamente qué parches faltan para poder instalarlos manualmente.

## Datos de entrada

```
# Lista de parches CRÍTICOS requeridos por el boletín de seguridad
$kbsRequeridos = @("KB500123", "KB409999", "KB890830", "KB500556", "KB500321", "KB999999")

# Lista de parches INSTALADOS actualmente en el servidor 
# Nota: Están desordenados y podría haber parches viejos que no son críticos.
$kbsInstalados = @("KB100000", "KB500556", "KB409999", "KB100001", "KB890830", "KB200022")
```

## Requerimientos técnicos

El script debe realizar las siguientes operaciones utilizando lógica de arrays:

- Inicialización: crea un array vacío llamado $kbsFaltantes.
- Lógica de comparación:
    - Debes recorrer la lista de $kbsRequeridos uno a uno.
    - Para cada parche requerido, verifica si NO existe en la lista de $kbsInstalados.
    - Si el parche falta, añádelo al array $kbsFaltantes.
- Identificación de parches antiguos:
    - Crea otro array vacío llamado $kbsExtra.
    - Identifica qué parches tiene el servidor instalados que NO estaban en la lista de requeridos (parches antiguos u otros no críticos).
- Informe de estado:
    - El script debe calcular el porcentaje de cumplimiento (ej: si requiere 6 y tiene 3, cumple el 50%). - Debe imprimir la lista de los parches que faltan separados por comas.

## Script

```
# Lista de parches CRÍTICOS requeridos por el boletín de seguridad
$kbsRequeridos = @("KB500123", "KB409999", "KB890830", "KB500556", "KB500321", "KB999999")

# Lista de parches INSTALADOS actualmente en el servidor 
# Nota: Están desordenados y podría haber parches viejos que no son críticos.
$kbsInstalados = @("KB100000", "KB500556", "KB409999", "KB100001", "KB890830", "KB200022")

$kbsFaltantes = @()
$kbsExtra = @()

foreach ($datoRequerido in $kbsRequeridos) {
    if ($datoRequerido -notin $kbsInstalados) {
        $kbsFaltantes += $datoRequerido
    }
}

foreach ($datoInstalado in $kbsInstalados) {
    if ($datoInstalado -notin $kbsRequeridos) {
        $kbsExtra += $datoInstalado
    }
}

$porcentaje = (100 * ($kbsRequeridos.Length - $kbsFaltantes.Length) / $kbsRequeridos.Length).ToString() + "%"

Write-Host "=== AUDITORIA DE SEGURIDAD ==="
Write-Host "Total Requeridos: $($kbsRequeridos.Length)"
Write-Host "Total Instalados: $($kbsInstalados.Length)"
Write-Host ""
Write-Host "ESTADO DE CUMPLIMIENTO: $porcentaje"
Write-Host ""
Write-Host 
Write-Host "[URGENTE] Parches Faltantes:"
Write-Host ($kbsFaltantes -join ", ")
Write-Host 
Write-Host ""
Write-Host "[INFO] Parches 'Extra' instalados (No criticos):"
Write-Host ($kbsExtra -join " - ")
```

## Resulado

```

```