# Gestión de procesos en Linux

## 1. Exploración basica de procesos

1- Abre una terminal y utiliza el comando ps para listar los procesos asociados a tu usuario. Anota el PID (Process ID) de al menos tres procesos.

![ps](..\Imagenes\ps.png)

2- Usa el comando ps aux para listar todos los procesos del sistema. Identifica y anota el PID de un proceso que no pertenezca a tu usuario.

![psaux](..\Imagenes\psaux.png)

3- Responde a las siguientes preguntas:

- ¿Qué diferencia hay entre el comando ps y ps aux?

ps muestra los procesos d el usuario actual, mientras que ps aux muestra todos los procesos del sistema.

- Cuando decimos que un proceso pertenece a un usuario, ¿qué implicaciones tiene? Es decir, ¿en qué afecta eso al proceso?

Decimos que un proceso le pertenece a un usuario cuando este se ejecuta con los permisos y limitaciones de ese usuario. Está sujeto a los límites de recursos definidos para ese usuario. Solo puede acceder a los archivos y recursos permitidos a ese usuario. Solo su propietario (o root) puede controlarlo o terminarlo. Hereda el entorno y variables del usuario.

## 2. Monitorización de procesos en tiempo real

1- Utiliza el comando top para monitorizar los procesos en tiempo real. Identifica el proceso que consume más CPU y anota su PID.

![top](..\Imagenes\topram.png)

2- Cambia la visualización de top para ordenar los procesos por uso de memoria (tecla M). Anota el nombre del proceso que consume más memoria.

![top](..\Imagenes\topmem.png)

3- Responde a las siguientes preguntas:

- ¿Qué columnas de información se muestran en top y cuál es su significado?
  
Se muestran 12 columnas y son:
PID - ID del proceso
USER - Usuario propietario
PR - Prioridad del proceso
NI - Valor "nice" (prioridad manual)
VIRT - Memoria virtual usada
RES - Memoria ram usada
SHR - Memoria compartida con otros procesos
S - Estado del proceso (R=ejecutando S=durmiendo Z=Zombie)
%CPU - Porcentaje de cpu que usa
%MEM - Porcentaje de ram que usa
TIME+ - Tiempo total de CPU consumido
COMMAND - Nombre del proceso

- ¿Cómo puedes cambiar el intervalo de actualización de top?

Desde el comando top pulsamos d (delay) e introducimos los segundo que queremos que tenga de intervalo.

Desde la linea de comandos seria con top -d [n segundos]

## 3. Detener y reanudar procesos

1- Ejecuta el comando sleep 300 & para crear un proceso en segundo plano que duerma durante 300 segundos.

![sleep](..\Imagenes\sleep.png)

2- Usa el comando jobs para listar los trabajos en segundo plano. Anota el ID del trabajo.

![jobs](..\Imagenes\jobs.png)

3- Detén el proceso usando el comando kill con la señal SIGSTOP. Verifica que el proceso esté detenido.

kill -SIGSTOP 1436

Compruebo con jobs

4- Reanuda el proceso usando el comando kill con la señal SIGCONT. Verifica que el proceso esté en ejecución nuevamente.

kill -SIGCONT 1436

Compruebo con jobs

5- Responde a las siguientes preguntas

- ¿Qué efecto tiene la señal SIGSTOP sobre un proceso?

Detiene (suspende) la ejecución del proceso inmediatamente.
No puede ser ignorada ni manejada.

- ¿Cómo puedo verificar si un proceso está detenido o en ejecución?

Puedes verificarlo con el comando: `ps -1`

## 4. Terminar procesos

1- Crea un proceso en segundo plano con el comando sleep 600 &.

`sleep 600 &`

2- Usa el comando ps para encontrar el PID del proceso sleep.

`ps aux | grep sleep` Con este comando buscamos los PID filtrando la busqueda por el proceso sleep.

3- Termina el proceso usando el comando kill con la señal SIGTERM. Verifica que el proceso haya sido eliminado.

`kill -SIGTERM "PID"` Con este comando matamos el proceso sleep.

`ps aux | grep sleep` Y comprobamos que lo hayamos eliminado.

4- Responde a las siguientes preguntas.

- ¿Qué diferencia hay entre las señales SIGTERM y SIGKILL?

SIGTERM: pide al proceso que termine graciosa y ordenadamente (puede manejarla o ignorarla).

SIGKILL: finaliza el proceso de inmediato, no puede ser ignorada ni manejada.

- ¿Por qué es preferible utilizar SIGTERM antes que SIGKILL para terminar un proceso?

Porque SIGTERM permite que el proceso se cierre de forma ordenada, liberando recursos y guardando datos.
En cambio, SIGKILL lo mata inmediatamente sin darle oportunidad de limpiar nada.

## 5. Prioridades de procesos

1- Ejecuta el comando sleep 200 en primer plano. Detén el proceso usando Ctrl+Z.

`sleep 200` Después hacemos Ctrl+Z.

2- Usa el comando bg para mover el proceso detenido a segundo plano.

`bg`

3- Trae el proceso de segundo plano a primer plano usando el comando fg.

`fg`

4- Responde las siguientes preguntas:

- ¿Qué significa que un proceso está en segundo plano?

Significa que el proceso se está ejecutando pero no ocupa la terminal, permitiéndote usar la terminal para otros comandos mientras el proceso sigue corriendo.

- ¿Qué comando utilizarías para mover un proceso detenido a segundo plano?

`bg`

- ¿Cómo puedes traer un proceso de segundo plano a primer plano si tienes múltiples trabajos en segundo plano?

`fg %"job_id"`

## 7. Uso de pstree y htop

1- Instala la herramienta htop si no está disponible en tu sistema (sudo apt install htop).

`sudo apt install htop`

2- Usa htop para explorar los procesos de manera interactiva. Filtra los procesos por usuario y anota el nombre de un proceso que pertenezca a otro usuario.

Usamos `htop` para ver los procesos.

Para filtrar por usuario pulsamos U.

3- Usa el comando pstree para visualizar los procesos en forma de árbol. Identifica un proceso padre y sus procesos hijos, y anota sus nombres.

Ejecutamos `pstree -p`.

Los procesos padre están situados a la izquierda, de ellos salen hacia la derecha los procesos hijo.

4- Responde las siguientes preguntas:

- ¿Qué ventaja tiene utilizar pstree frente a ps para visualizar procesos?

La ventaja principal es que pstree muestra la relación jerárquica entre procesos (quién es padre y quién hijo) de forma visual en árbol, mientras que ps lista los procesos de manera plana, sin mostrar la estructura de dependencias.

- ¿Cómo puedes filtrar procesos por usuario en htop?

Desde dentro de htop, pulsando U.

## 8. Matar procesos de manera forzosa

1- Crea un proceso en segundo plano con sleep 400 &.

`sleep 400 &`

2- Usa el comando kill -9 para terminar el proceso de manera forzosa. Verifica que el proceso haya sido eliminado.

`kill -9 "PID"` Con este comando apagamos el proceso de manera forzosa.

Para comprobar que lo hemos apagado utilizamos `ps aux | grep sleep`

3- Responde las siguientes preguntas:

- ¿En qué casos sería necesario usar kill -9 en lugar de kill sin opciones?

Sería necesario usar kill -9 cuando un proceso no responde a la señal normal (SIGTERM) o está bloqueado.

- ¿Qué riesgos implica usar SIGKILL para terminar un proceso?

Usar SIGKILL implica estos riesgos:

1- El proceso no puede liberar recursos (memoria, archivos abiertos, conexiones de red).

2- Puede corromper datos si estaba escribiendo en archivos o bases de datos.

3- Puede dejar el sistema en un estado inconsistente si el proceso manejaba servicios críticos.